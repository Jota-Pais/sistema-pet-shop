generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model animal {
  id              Int        @id @default(autoincrement())
  nome            String     @db.VarChar(50)
  raca            String?    @db.VarChar(100)
  especie         String?    @db.VarChar(50)
  peso            Decimal?   @db.Decimal(8, 2)
  observacoes     String?    @db.VarChar(100)
  sexo_animal     String?    @db.VarChar(1)
  data_nascimento DateTime?  @db.Date
  id_cliente      Int
  cliente         cliente    @relation(fields: [id_cliente], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_animal_cliente")
  consulta        consulta[]
}

model cliente {
  id            Int       @id @default(autoincrement())
  nome          String    @db.VarChar(50)
  cidade        String?   @db.VarChar(50)
  cep           String?   @db.VarChar(20)
  telefone      String?   @db.VarChar(20)
  cpf           String?   @db.VarChar(20)
  email         String?   @db.VarChar(100)
  data_cadastro DateTime? @default(now()) @db.Timestamp(6)
  animal        animal[]
}

model consulta {
  id             Int         @id @default(autoincrement())
  data_consulta  DateTime    @db.Timestamp(6)
  diagnostico    String?     @db.VarChar(215)
  status         String?     @db.VarChar(100)
  id_animal      Int
  id_veterinario Int
  animal         animal      @relation(fields: [id_animal], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_consulta_animal")
  veterinario    veterinario @relation(fields: [id_veterinario], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_consulta_veterinario")
  servico        servico[]
}

model servico {
  id          Int      @id @default(autoincrement())
  tipo        String?  @db.VarChar(100)
  valor       Decimal? @db.Decimal(10, 2)
  descricao   String?  @db.VarChar(200)
  id_consulta Int
  consulta    consulta @relation(fields: [id_consulta], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_servico_consulta")
}

model veterinario {
  id            Int        @id @default(autoincrement())
  nome          String     @db.VarChar(50)
  especialidade String?    @db.VarChar(67)
  cpf           String?    @db.VarChar(20)
  telefone      String?    @db.VarChar(20)
  email         String?    @db.VarChar(100)
  crmv          String?    @db.VarChar(20)
  consulta      consulta[]
}
